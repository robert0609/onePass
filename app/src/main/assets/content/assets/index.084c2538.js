import{L as h}from"./index.20457248.js";import{O as j}from"./index.7ecd3942.js";import{s as k,S}from"./index.8f988f7c.js";import{d as T,u as F,V as I,f,W as V,a0 as P,G as q,F as z,c as l,Y as a,a as s,X as r,Z as c}from"./vendor.3eeb42f9.js";import"./logo.90febaaa.js";import"./index.c1784500.js";var U=T({name:"SiteList",setup(){const p=F(),v=I();let n;const t=f(!1),{level:u,siteList:m,pageSize:E,currentPageIndex:C,totalCount:b,fetchSiteList:g}=k(),i=f(0);V(()=>{u.value=v.query.level,o()}),P((e,A,x)=>{u.value=e.query.level,o(),x()});function o(){n=q.service({target:"#site-table"}),g().catch(e=>{z.error(e.message)}).finally(()=>{n&&n.close()})}function L(e){p.push({name:"accountList",query:{site_id:e.id}})}function d(e){e?i.value=e.id:i.value=0,t.value=!0}function y(){t.value=!1,o()}return()=>l(c,null,[l(h,null,{default:()=>[l("div",{class:"flex justify-end"},[l(a("ElButton"),{icon:"ElIconPlus",type:"primary",onClick:()=>d()},{default:()=>[s("\u65B0\u589E\u5E94\u7528")]})]),l(j,r({data:m.value,pageSize:E.value,currentPageIndex:C.value,totalCount:b.value},{id:"site-table",height:"750px"}),{default:()=>[l(a("ElTableColumn"),{prop:"id",label:"\u5E94\u7528\u7F16\u53F7"},null),l(a("ElTableColumn"),{prop:"name",label:"\u5E94\u7528\u540D\u79F0"},null),l(a("ElTableColumn"),{label:"\u5E94\u7528\u5730\u5740"},{default:({row:e})=>e.url==="none"?void 0:l(a("ElLink"),r({href:e.url},{target:"_blank"}),{default:()=>[e.url]})}),l(a("ElTableColumn"),{label:"\u64CD\u4F5C"},{default:({row:e})=>l(c,null,[l(a("ElLink"),{type:"primary",href:"javascript:void(0);",onClick:()=>d(e)},{default:()=>[s("\u7F16\u8F91")]}),l(a("ElDivider"),{direction:"vertical"},null),l(a("ElLink"),{type:"primary",href:"javascript:void(0);",onClick:()=>L(e)},{default:()=>[s("\u5E10\u53F7\u5217\u8868")]})])})]})]}),l(a("ElDrawer"),r({title:"\u5E94\u7528\u7F16\u8F91",size:"30%"},{modelValue:t.value,["onUpdate:modelValue"]:e=>t.value=e}),{default:()=>[t.value?l(S,{level:u.value,id:i.value,onConfirm:y,onCancel:()=>t.value=!1},null):void 0]})])}});export{U as default};
//# sourceMappingURL=index.084c2538.js.map
