import{L as j}from"./index.4961e40c.js";import{O as S}from"./index.5f7d857b.js";import{s as T,S as F}from"./index.c83027f8.js";import{d as V,u as w,V as D,f as i,W as I,i as d,X as q,G as z,F as A,c as e,Y as c,Z as a,_ as f,a as p}from"./vendor.bb182ad9.js";import"./logo.90febaaa.js";import"./index.613def92.js";var B=V({name:"Home",setup(){const m=w(),v=D();let n;const t=i(!1),{keyword:o,siteList:b,pageSize:C,currentPageIndex:E,totalCount:g,fetchSiteList:y}=T(),r=i(0),s=i("");I(()=>{o.value=v.query.keyword,!d(o.value)&&u()}),q((l,M,h)=>{o.value=l.query.keyword,!d(o.value)&&(u(),h())});function u(){n=z.service({target:"#site-table"}),y().catch(l=>{A.error(l.message)}).finally(()=>{n&&n.close()})}function L(l){m.push({name:"accountList",query:{site_id:l.id}})}function x(l){r.value=l.id,s.value=l.level,t.value=!0}function k(){t.value=!1,u()}return()=>e(f,null,[e(j,null,{default:()=>[e(S,c({data:b.value,pageSize:C.value,currentPageIndex:E.value,totalCount:g.value},{id:"site-table",height:"750px"}),{default:()=>[e(a("ElTableColumn"),{prop:"id",label:"\u5E94\u7528\u7F16\u53F7"},null),e(a("ElTableColumn"),{prop:"level",label:"\u5E94\u7528\u7EA7\u522B"},null),e(a("ElTableColumn"),{prop:"name",label:"\u5E94\u7528\u540D\u79F0"},null),e(a("ElTableColumn"),{prop:"url",label:"\u5E94\u7528\u5730\u5740"},null),e(a("ElTableColumn"),{label:"\u64CD\u4F5C"},{default:({row:l})=>e(f,null,[e(a("ElLink"),{type:"primary",href:"javascript:void(0);",onClick:()=>x(l)},{default:()=>[p("\u7F16\u8F91")]}),e(a("ElDivider"),{direction:"vertical"},null),e(a("ElLink"),{type:"primary",href:"javascript:void(0);",onClick:()=>L(l)},{default:()=>[p("\u8D26\u53F7\u5217\u8868")]})])})]})]}),e(a("ElDrawer"),c({title:"\u5E94\u7528\u7F16\u8F91",size:"30%"},{modelValue:t.value,["onUpdate:modelValue"]:l=>t.value=l}),{default:()=>[t.value?e(F,{level:s.value,id:r.value,onConfirm:k,onCancel:()=>t.value=!1},null):void 0]})])}});export{B as default};
//# sourceMappingURL=index.ae3c8b65.js.map
