import{L as j}from"./index.b28819fe.js";import{O as S}from"./index.eba448df.js";import{s as T,S as F}from"./index.0c307f3a.js";import{d as V,u as w,V as I,f as u,W as q,i as d,X as z,G as A,F as D,c as a,Y as f,Z as l,_ as c,a as p}from"./vendor.bb182ad9.js";import"./logo.90febaaa.js";import"./index.3fab5041.js";var B=V({name:"Home",setup(){const m=w(),v=I();let n;const t=u(!1),{keyword:o,siteList:b,pageSize:C,currentPageIndex:E,totalCount:g,fetchSiteList:y}=T(),r=u(0),s=u("");q(()=>{o.value=v.query.keyword,!d(o.value)&&i()}),z((e,M,h)=>{o.value=e.query.keyword,!d(o.value)&&(i(),h())});function i(){n=A.service({target:"#site-table"}),y().catch(e=>{D.error(e.message)}).finally(()=>{n&&n.close()})}function L(e){m.push({name:"accountList",query:{site_id:e.id}})}function x(e){r.value=e.id,s.value=e.level,t.value=!0}function k(){t.value=!1,i()}return()=>a(c,null,[a(j,null,{default:()=>[a(S,f({data:b.value,pageSize:C.value,currentPageIndex:E.value,totalCount:g.value},{id:"site-table",height:"750px"}),{default:()=>[a(l("ElTableColumn"),{prop:"id",label:"\u5E94\u7528\u7F16\u53F7"},null),a(l("ElTableColumn"),{prop:"name",label:"\u5E94\u7528\u540D\u79F0"},null),a(l("ElTableColumn"),{prop:"url",label:"\u5E94\u7528\u5730\u5740"},null),a(l("ElTableColumn"),{label:"\u64CD\u4F5C"},{default:({row:e})=>a(c,null,[a(l("ElLink"),{type:"primary",href:"javascript:void(0);",onClick:()=>x(e)},{default:()=>[p("\u7F16\u8F91")]}),a(l("ElDivider"),{direction:"vertical"},null),a(l("ElLink"),{type:"primary",href:"javascript:void(0);",onClick:()=>L(e)},{default:()=>[p("\u5E10\u53F7\u5217\u8868")]})])})]})]}),a(l("ElDrawer"),f({title:"\u5E94\u7528\u7F16\u8F91",size:"30%"},{modelValue:t.value,["onUpdate:modelValue"]:e=>t.value=e}),{default:()=>[t.value?a(F,{level:s.value,id:r.value,onConfirm:k,onCancel:()=>t.value=!1},null):void 0]})])}});export{B as default};
//# sourceMappingURL=index.8ed6a946.js.map
