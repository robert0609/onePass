var L=Object.defineProperty;var N=(n,t,e)=>t in n?L(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var f=(n,t,e)=>(N(n,typeof t!="symbol"?t+"":t,e),e);import{d as h,c as i,R as j,r as v,K as b,u as O,a as g,b as F,e as T,l as y,f as S,i as P,g as M,h as U,j as k,E as R,k as V,m as K,n as H,o as W,p as q,q as $,s as J,t as G,v as z,w as Q,x as X,y as Y,z as Z,A as ee,B as te,C as ne,D as re,F as se,G as ue,H as oe,I as ae,J as ie,L as ce,M as le,N as pe,O as de,S as me,P as Ee,U as fe,Q as he,T as ge}from"./vendor.bb182ad9.js";const Fe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const o of u)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(u){const o={};return u.integrity&&(o.integrity=u.integrity),u.referrerpolicy&&(o.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?o.credentials="include":u.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(u){if(u.ep)return;u.ep=!0;const o=e(u);fetch(u.href,o)}};Fe();var _e=h({name:"App",setup(){return()=>i(j,null,{default:({Component:n})=>{const t=v(n);return i(b,{include:["SiteList"]},[i(t,null,null)])}})}});const Ae="modulepreload",w={},De="/",l=function(t,e){return!e||e.length===0?t():Promise.all(e.map(r=>{if(r=`${De}${r}`,r in w)return;w[r]=!0;const u=r.endsWith(".css"),o=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const a=document.createElement("link");if(a.rel=u?"stylesheet":Ae,u||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),u)return new Promise((p,E)=>{a.addEventListener("load",p),a.addEventListener("error",E)})})).then(()=>t())};var ye=h({name:"NotFound",setup(){const n=O(),t=()=>{n.replace("/")};return()=>i("div",null,[i("div",null,[g("\u5982\u679C\u4F60\u6765\u5230\u8FD9\u91CC\uFF0C\u8BF4\u660E\u9875\u9762\u51FA\u53BB\u65C5\u6E38\u4E86\uFF01")]),i("div",{onClick:t},[g("\u8FD4\u56DE\u9996\u9875")])])}});const we=h({name:"ErrorPage",props:{message:{type:String,default:"\u7F51\u7EDC\u5F02\u5E38\u8BF7\u68C0\u67E5\u540E\u91CD\u65B0\u52A0\u8F7D"}},setup(n){const t=()=>{location.reload()};return()=>i("div",null,[i("div",null,[n.message]),i("div",{onClick:t},[g("\u91CD\u65B0\u52A0\u8F7D")])])}});var B;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.RESTORE_ERROR=5001]="RESTORE_ERROR",n[n.NEED_AUTH=4001]="NEED_AUTH"})(B||(B={}));const Be={5001:"\u5907\u4EFD\u6570\u636E\u6062\u590D\u5931\u8D25",4001:"\u9700\u8981\u6388\u6743"};class d extends Error{constructor(t=0,e="",r){super(e);this.code=t,this.params=r,this.name=this.constructor.name}static createApiError(t,e){return t?new d(0,t,e):new d(0,"\u62B1\u6B49\u51FA\u9519\u4E86",e)}static createBuiltInApiError(t,e){const r=Be[t];return r?new d(t,r,e):new d(t,"\u62B1\u6B49\u51FA\u9519\u4E86",e)}}var I;(function(n){n[n.UNKNOWN=0]="UNKNOWN"})(I||(I={}));const Ie={};class m extends Error{constructor(t=0,e="",r){super(e);this.code=t,this.params=r,this.name=this.constructor.name}static createUIError(t,e){return t?new m(0,t,e):new m(0,"\u62B1\u6B49\u51FA\u9519\u4E86",e)}static createBuiltInUIError(t,e){const r=Ie[t];return r?new m(t,r,e):new m(t,"\u62B1\u6B49\u51FA\u9519\u4E86",e)}}function _(n){return n&&Object.fromEntries(Object.entries(n).map(([t,e])=>Array.isArray(e)?[F(t),Array.from(Object.assign(_(e),{length:e.length}))]:typeof e=="object"&&e!==null?[F(t),_(e)]:[F(t),e]))}const xe={400:"\u9519\u8BEF\u7684\u8BF7\u6C42",401:"\u672A\u6388\u6743\uFF0C\u8BF7\u767B\u5F55",403:"\u670D\u52A1\u5668\u62D2\u7EDD\u8BBF\u95EE",404:"\u670D\u52A1\u5668\u672A\u627E\u5230\u8D44\u6E90",408:"\u8BF7\u6C42\u8D85\u65F6",500:"\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF",502:"\u7F51\u5173\u9519\u8BEF",503:"\u670D\u52A1\u4E0D\u53EF\u7528",504:"\u7F51\u5173\u8D85\u65F6"};class c extends Error{constructor(t=0,e=""){super(e);this.code=t,this.name=this.constructor.name}static createBuiltInApiError(t){const e=xe[t];return e?new c(t,e):new c(t,"\u62B1\u6B49\u51FA\u9519\u4E86")}}var x;(function(n){n[n.URL_ENCODE=0]="URL_ENCODE",n[n.JSON=1]="JSON",n[n.FORM_DATA=2]="FORM_DATA"})(x||(x={}));const Ce="multipart/form-data",A={timeout:2e4,headers:{}};function Le(n){const{timeout:t,baseURL:e,headers:r}=n;let u=A.headers;return n.headers&&(u=Object.assign({},A.headers,n.headers)),Object.assign({},A,{timeout:t,baseURL:e,mergedHeaders:u})}class Ne{constructor(t={}){f(this,"_axiosInstanceConfig");f(this,"_ajax");f(this,"_concurrencyMap");this._concurrencyMap=new Map,this._axiosInstanceConfig=Le(t),this._ajax=T.create(this._axiosInstanceConfig),this._ajax.interceptors.request.use(e=>(e.headers||(e.headers={}),e),e=>Promise.reject(e)),this._ajax.interceptors.response.use(e=>{if(e&&e.status===200)if(e.data){if(e.data=_(e.data),!e.data.isSuccess&&e.data.errorCode===1)throw D.replace({name:"login"}),c.createBuiltInApiError(401);return e}else throw new c(200,"\u63A5\u53E3\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A");else throw new c(0,"\u62B1\u6B49\u51FA\u9519\u4E86")},e=>{let r=null;return e.response?r=c.createBuiltInApiError(e.response.status):r=new c(0,"\u62B1\u6B49\u51FA\u9519\u4E86"),Promise.reject(r)})}registerRequestInterceptor(t,e){t&&this._ajax.interceptors.request.use(t,e)}registerResponseInterceptor(t,e){t&&this._ajax.interceptors.response.use(t,e)}async get(t,e,{withCredentials:r=!0}={}){const u=e||{};u.ts=+new Date;const o=y.stringify({url:t,params:e});if(this._concurrencyMap.has(o))return await this._concurrencyMap.get(o);{const a=this._ajax.get(t,{params:u,withCredentials:r});this._concurrencyMap.set(o,a);const p=await a;return this._concurrencyMap.delete(o),p}}async post(t,e,{withCredentials:r=!0,contentType:u=0}={}){let o=e;u===0&&(o=y.stringify(o));const a={};return u===2&&(a["Content-Type"]=Ce),await this._ajax.post(t,o,{withCredentials:r,headers:a})}}var je=new Ne;async function ve(n){var e;const t=await je.post("/login",n);if(!t.data.isSuccess)throw d.createApiError(t.data.message?t.data.message:(e=t.data.errorCode)==null?void 0:e.toString());return t.data}const be=new Date(0);function C(n){const t=document.cookie.split("; ");for(let e=0;e<t.length;e++){const r=t[e].split("=");if(r[0]===n)return r[1]}return""}function Oe(n,t,e={path:"/",domain:""}){const r=new Date,u=C(n);u!==null&&u!==""&&(r.setTime(r.getTime()-1e4),document.cookie=n+"="+u+"; expires="+r.toUTCString()+"; path=/");let o=n+"="+t.toString();const{expires:a,path:p,domain:E}=e;a&&a.getTime()>be.getTime()&&(o+="; expires="+a.toUTCString()),p?o+="; path="+p:o+="; path=/",E&&E.toLowerCase()!=="localhost"&&(o+="; domain="+E),document.cookie=o}function Ue(){const n=S("");async function t(){if(P(n.value))throw m.createUIError("\u8BF7\u8F93\u5165\u89E3\u9501\u7801");await ve({authority:n.value}),Oe("authority",n.value)}return{token:n,handleLogin:t}}function Te(){return!!C("authority")}const Se=[{name:"home",path:"/:pathMatch(home)?",component:()=>l(()=>import("./index.8ed6a946.js"),["assets/index.8ed6a946.js","assets/index.b28819fe.js","assets/logo.90febaaa.js","assets/vendor.bb182ad9.js","assets/vendor.663ec990.css","assets/index.eba448df.js","assets/index.0ee5acbf.css","assets/index.0c307f3a.js"])},{name:"login",path:"/unlock",component:()=>l(()=>import("./index.9b498661.js"),["assets/index.9b498661.js","assets/logo.90febaaa.js","assets/vendor.bb182ad9.js","assets/vendor.663ec990.css"])},{name:"siteList",path:"/site/list",component:()=>l(()=>import("./index.5bce3228.js"),["assets/index.5bce3228.js","assets/index.b28819fe.js","assets/logo.90febaaa.js","assets/vendor.bb182ad9.js","assets/vendor.663ec990.css","assets/index.eba448df.js","assets/index.0ee5acbf.css","assets/index.0c307f3a.js"])},{name:"siteEdit",path:"/site/edit",component:()=>l(()=>import("./index.0c307f3a.js").then(function(n){return n.i}),["assets/index.0c307f3a.js","assets/vendor.bb182ad9.js","assets/vendor.663ec990.css"])},{name:"accountList",path:"/account/list",component:()=>l(()=>import("./index.d82d37dc.js"),["assets/index.d82d37dc.js","assets/el-notification.e8563994.css","assets/index.b28819fe.js","assets/logo.90febaaa.js","assets/vendor.bb182ad9.js","assets/vendor.663ec990.css","assets/index.f3e58046.js"])},{name:"accountEdit",path:"/account/edit",component:()=>l(()=>import("./index.f3e58046.js").then(function(n){return n.i}),["assets/index.f3e58046.js","assets/vendor.bb182ad9.js","assets/vendor.663ec990.css"])},{name:"restore",path:"/manage",component:()=>l(()=>import("./index.45e6bfb8.js"),["assets/index.45e6bfb8.js","assets/el-notification.e8563994.css","assets/index.b28819fe.js","assets/logo.90febaaa.js","assets/vendor.bb182ad9.js","assets/vendor.663ec990.css"])},{name:"error",path:"/error",component:we},{name:"notFound",path:"/:pathMatch(.*)*",component:ye}],D=M({history:U("/"),routes:Se});D.beforeEach((n,t,e)=>{n.name!=="login"?Te()?e():e({name:"login",query:{src_url:n.fullPath},replace:!0}):e()});const s=k(_e);s.config.globalProperties.$ELEMENT={};s.use(D);s.use(R);s.use(V);s.use(K);s.use(H);s.use(W);s.use(q);s.use($);s.use(J);s.use(G);s.use(z);s.use(Q);s.use(X);s.use(Y);s.use(Z);s.use(ee);s.use(te);s.use(ne);s.use(re);s.use(se);s.use(ue);s.use(oe);s.use(ae);s.use(ie);s.use(ce);s.use(le);s.use(pe);s.component("ElIconKey",de);s.component("ElIconSetting",me);s.component("ElIconSearch",Ee);s.component("ElIconUnlock",fe);s.component("ElIconPlus",he);s.component("ElIconUploadFilled",ge);s.mount("#app");export{d as A,m as U,je as a,B as b,Ue as l};
//# sourceMappingURL=index.3fab5041.js.map
